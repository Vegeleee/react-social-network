(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return p}));var n=a(100),r=a(0),o=a.n(r),s=a(37),c=a.n(s),i=a(93),l=function(e){var t=e.meta,a=e.children,n=t.error&&t.touched;return o.a.createElement("div",{className:"".concat(c.a.formControl," ").concat(n?c.a.error:"")},o.a.createElement("div",null,a),n&&o.a.createElement("div",{className:c.a.errorText},t.error))},u=function(e){var t=e.input,a=Object(n.a)(e,["input"]);return o.a.createElement(l,a,o.a.createElement("textarea",Object.assign({},t,a)))},m=function(e){var t=e.input,a=Object(n.a)(e,["input"]);return o.a.createElement(l,a,o.a.createElement("input",Object.assign({},t,a)))},p=function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return o.a.createElement("div",null,o.a.createElement(i.a,Object.assign({placeholder:e,name:t,component:n,validate:a},r))," ",s)}},11:function(e,t,a){e.exports={preloadWrapper:"ProfileInfo_preloadWrapper__O7As_",descBlock:"ProfileInfo_descBlock__2HhTR",descBlockLeftCol:"ProfileInfo_descBlockLeftCol__2beiZ",mainPhoto:"ProfileInfo_mainPhoto__E2WaB",descBlockRightCol:"ProfileInfo_descBlockRightCol__2CWh2",head:"ProfileInfo_head__2L527",name:"ProfileInfo_name__BDBmC",profileDataItem:"ProfileInfo_profileDataItem__2f1zQ",profileData:"ProfileInfo_profileData__12mUh",contact:"ProfileInfo_contact__te2Ea"}},131:function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(51),r=a(9),o={dialogs:[{id:1,name:"Danil"},{id:2,name:"Slava"},{id:3,name:"Maria"},{id:4,name:"Sasha"},{id:5,name:"Aleksey"},{id:6,name:"Vlad"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Yo!"},{id:4,message:"Yo!"},{id:5,message:"Yo!"}]},s=function(e){return{type:"dialogs/SEND-MESSAGE",newMessage:e}};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/SEND-MESSAGE":var a={id:e.messages.length+1,message:t.newMessage};return Object(r.a)({},e,{messages:[].concat(Object(n.a)(e.messages),[a])});default:return e}}},138:function(e,t,a){e.exports=a.p+"static/media/preloader.213e51e2.gif"},139:function(e,t,a){e.exports={preloader:"Preloader_preloader__CNKtc"}},140:function(e,t,a){e.exports={status:"ProfileStatus_status__Y_Mn_"}},16:function(e,t,a){e.exports={nav:"Navbar_nav__3cHYR",navList:"Navbar_navList__2hxWr",navListItem:"Navbar_navListItem__2E7VC",active:"Navbar_active__21R_N"}},168:function(e,t,a){e.exports=a(295)},173:function(e,t,a){},174:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(69),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(173);var c=a(25),i=a(26),l=a(28),u=a(27),m=a(29),p=(a(174),a(16)),f=a.n(p),d=a(13),g=function(){return r.a.createElement("nav",{className:f.a.nav},r.a.createElement("ul",{className:f.a.navList},r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/profile",activeClassName:f.a.active},"Profile")),r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/dialogs",activeClassName:f.a.active},"Messages")),r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/users",activeClassName:f.a.active},"Users")),r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/news",activeClassName:f.a.active},"News")),r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/music",activeClassName:f.a.active},"Music")),r.a.createElement("li",{className:f.a.navListItem},r.a.createElement(d.b,{to:"/settings",activeClassName:f.a.active},"Settings"))))},h=function(e){return r.a.createElement("div",null,"News")},E=function(e){return r.a.createElement("div",null,"Music")},v=function(e){return r.a.createElement("div",null,"Settings")},b=a(32),_=a(12),O=a(8),w=a.n(O),P=a(15),S=a(51),N=a(9),j=a(136),C=a.n(j).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"84eace83-6993-4047-89dd-082bc11cda1c"}}),y=function(){return C.get("auth/me").then((function(e){return e.data}))},I=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return C.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},k=function(){return C.delete("auth/login").then((function(e){return e.data}))},U={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return C.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return C.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return C.delete("follow/".concat(e)).then((function(e){return e.data}))}},x=function(e){return Object(P.a)(w.a.mark((function t(){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",C.get("profile/".concat(e)).then((function(e){return e.data})));case 1:case"end":return t.stop()}}),t)})))()},T=function(e){return C.get("profile/status/".concat(e)).then((function(e){return e.data}))},A=function(e){return C.put("profile/status/",{status:e}).then((function(e){return e.data}))},L=function(e){var t=new FormData;return t.append("image",e),C.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},F=function(e){return C.put("profile",e).then((function(e){return e.data}))},D=function(){return C.get("security/get-captcha-url").then((function(e){return e.data}))},B=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(N.a)({},e,{},n):e}))},R="users/FOLLOW",M={users:[],pageSize:12,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},z=function(e){return{type:R,userId:e}},G=function(e){return{type:"users/UNFOLLOW",userId:e}},W=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},H=function(e,t){return{type:"users/TOGGLE_FOLLOWING_PROGRESS",isFetching:e,userId:t}},V=function(){var e=Object(P.a)(w.a.mark((function e(t,a,n,r){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(H(!0,a)),e.next=3,n(a);case 3:0===e.sent.resultCode&&t(r(a)),t(H(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(N.a)({},e,{users:B(e.users,t.userId,"id",{followed:!0})});case"users/UNFOLLOW":return Object(N.a)({},e,{users:B(e.users,t.userId,"id",{followed:!1})});case"users/SET_USERS":return Object(N.a)({},e,{users:t.users});case"users/SET_CURRENT_PAGE":return Object(N.a)({},e,{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_COUNT":return Object(N.a)({},e,{totalUsersCount:t.totalUsersCount});case"users/TOGGLE_IS_FETCHING":return Object(N.a)({},e,{isFetching:t.isFetching});case"users/TOGGLE_FOLLOWING_PROGRESS":return Object(N.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(S.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});default:return e}},J=a(96),Y=a.n(J),K=a(45),X=a(41),Z=a(52),Q=a.n(Z),$=a(137),ee=a.n($),te=function(e){for(var t=e.totalItemsCount,a=e.pageSize,o=e.currentPage,s=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,l=Math.ceil(t/a),u=[],m=1;m<=l;m++)u.push(m);var p=Math.ceil(l/i),f=Object(n.useState)(1),d=Object(X.a)(f,2),g=d[0],h=d[1],E=(g-1)*i+1,v=g*i;return r.a.createElement("div",{className:Q.a.paginator},g>1&&r.a.createElement("button",{onClick:function(){h(g-1)},className:Q.a.paginatorPrevButton},"Prev"),u.filter((function(e){return e>=E&&e<=v})).map((function(e){return r.a.createElement("span",{key:e,className:ee()(Q.a.paginatorPageNumber,Object(K.a)({},Q.a.paginatorSelectedPage,o===e)),onClick:function(){s(e)}},e)})),p>g&&r.a.createElement("button",{onClick:function(){h(g+1)},className:Q.a.paginatorNextButton},"Next"))},ae=a(46),ne=a.n(ae),re=a(42),oe=a.n(re),se=function(e){var t=e.user,a=e.follow,n=e.unfollow,o=e.followingInProgress;return r.a.createElement("div",{className:oe.a.user},r.a.createElement("div",null,r.a.createElement("div",{className:oe.a.userPhoto},r.a.createElement(d.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:t.photos.small?t.photos.small:ne.a,alt:"User"}))),r.a.createElement("div",{className:oe.a.userFollowButton},t.followed?r.a.createElement("button",{disabled:o.some((function(e){return e===t.id})),onClick:function(){n(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:o.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Follow"))),r.a.createElement("div",{className:oe.a.userInfo},r.a.createElement("div",{className:oe.a.userInfoName},t.name),r.a.createElement("div",null,t.status)),r.a.createElement("div",{className:oe.a.userLocation},r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city")))},ce=function(e){var t=e.totalUsersCount,a=e.pageSize,n=e.currentPage,o=e.users,s=e.follow,c=e.unfollow,i=e.onPageChanged,l=e.followingInProgress;return r.a.createElement("div",{className:Y.a.usersContainer},r.a.createElement(te,{totalItemsCount:t,pageSize:a,currentPage:n,onPageChanged:i}),r.a.createElement("div",{className:Y.a.usersWrapper},o.map((function(e){return r.a.createElement(se,{key:e.id,user:e,follow:s,unfollow:c,followingInProgress:l})}))))},ie=a(138),le=a.n(ie),ue=a(139),me=a.n(ue),pe=function(){return r.a.createElement("div",{className:me.a.preloader},r.a.createElement("img",{src:le.a,alt:"Preloader"}))},fe=a(70),de=a(6),ge=function(e){return e.usersPage.users},he=function(e){return e.usersPage.pageSize},Ee=function(e){return e.usersPage.totalUsersCount},ve=function(e){return e.usersPage.currentPage},be=function(e){return e.usersPage.isFetching},_e=function(e){return e.usersPage.followingInProgress},Oe=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){var t=a.props;(0,t.requestUsers)(e,t.pageSize)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.requestUsers)(e.currentPage,e.pageSize)}},{key:"render",value:function(){return this.props.isFetching?r.a.createElement(pe,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress}))}}]),t}(r.a.Component),we=Object(de.d)(Object(_.b)((function(e){return{users:ge(e),pageSize:he(e),totalUsersCount:Ee(e),currentPage:ve(e),isFetching:be(e),followingInProgress:_e(e)}}),{follow:function(e){return function(t){V(t,e,U.follow.bind(U),z)}},unfollow:function(e){return function(t){V(t,e,U.unfollow.bind(U),G)}},requestUsers:function(e,t){return function(){var a=Object(P.a)(w.a.mark((function a(n){var r;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(W(!0)),n({type:"users/SET_CURRENT_PAGE",currentPage:e}),a.next=4,U.getUsers(e,t);case 4:r=a.sent,n(W(!1)),n({type:"users/SET_USERS",users:r.items}),n({type:"users/SET_TOTAL_USERS_COUNT",totalUsersCount:r.totalCount});case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}),fe.a)(Oe),Pe=a(11),Se=a.n(Pe),Ne=a(140),je=a.n(Ne),Ce=function(e){var t=Object(n.useState)(!1),a=Object(X.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(e.status),i=Object(X.a)(c,2),l=i[0],u=i[1];Object(n.useEffect)((function(){u(e.status)}),[e.status]);return r.a.createElement("div",null,!o&&r.a.createElement("div",null,r.a.createElement("span",{className:je.a.status,onDoubleClick:function(){e.isOwner&&s(!0)}},e.status||"------")),o&&r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(l)},onChange:function(e){u(e.target.value)},value:l})))},ye=a(132),Ie=a(10),ke=a(37),Ue=a.n(ke),xe=Object(ye.a)({form:"edit-profile-data"})((function(e){var t=e.profile,a=e.handleSubmit,n=e.error;return r.a.createElement("form",{onSubmit:a,className:Se.a.profileData},n&&r.a.createElement("div",{className:Ue.a.formSummaryError},n),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"Full name: ")," ",Object(Ie.c)("Full name","fullName",[],Ie.a,{type:"text"})),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"Looking for a job: ")," ",Object(Ie.c)("","lookingForAJob",[],Ie.a,{type:"checkbox"})),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"My skills: ")," ",Object(Ie.c)("Description","lookingForAJobDescription",[],Ie.b)),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"About me: ")," ",Object(Ie.c)("About me","aboutMe",[],Ie.b)),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"Contacts: "),Object.keys(t.contacts).map((function(e){return r.a.createElement("div",{key:e,className:Se.a.contact},r.a.createElement("b",null,e,": ")," ",Object(Ie.c)(e,"contacts."+e,[],Ie.a,{type:"text"}))}))),r.a.createElement("div",null,r.a.createElement("button",null,"Save")))})),Te=function(e){var t=e.profile,a=e.isOwner,n=e.toEditMode;return r.a.createElement("div",{className:Se.a.profileData},r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"Looking for a job: "),t.lookingForAJob?"Yes":"No"),t.lookingForAJob&&r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"My skills: "),t.lookingForAJobDescription),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("div",null,r.a.createElement("b",null,"About me: "),t.aboutMe)),r.a.createElement("div",{className:Se.a.profileDataItem},r.a.createElement("b",null,"Contacts: "),Object.keys(t.contacts).map((function(e){return r.a.createElement(Ae,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Edit")))},Ae=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",{className:Se.a.contact},r.a.createElement("b",null,t,": ")," ",a)},Le=function(e){var t=e.profile,a=e.status,o=e.updateStatus,s=e.isOwner,c=e.savePhoto,i=e.saveProfile,l=Object(n.useState)(!1),u=Object(X.a)(l,2),m=u[0],p=u[1];if(!t)return r.a.createElement("div",{className:Se.a.preloadWrapper},r.a.createElement(pe,null));return r.a.createElement("div",null,r.a.createElement("div",{className:Se.a.descBlock},r.a.createElement("div",{className:Se.a.descBlockLeftCol},r.a.createElement("img",{src:t.photos.large||ne.a,className:Se.a.mainPhoto,alt:"User"}),s&&r.a.createElement("input",{type:"file",onChange:function(e){e.target.files.length&&c(e.target.files[0])}})),r.a.createElement("div",{className:Se.a.descBlockRightCol},r.a.createElement("div",{className:Se.a.head},r.a.createElement("h1",{className:Se.a.name},t.fullName),r.a.createElement(Ce,{status:a,updateStatus:o,isOwner:s})),m?r.a.createElement(xe,{profile:t,initialValues:t,onSubmit:function(e){i(e).then((function(){p(!1)}))}}):r.a.createElement(Te,{profile:t,isOwner:s,toEditMode:function(){p(!0)}}))))},Fe=a(31),De="profile/ADD-POST",Be={posts:[{id:1,message:"Hi",likesCount:12},{id:2,message:"How are you",likesCount:11}],profile:null,status:"",newPostText:""},Re=function(e){return{type:"profile/SET_STATUS",status:e}},Me=function(e){return function(){var t=Object(P.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(e);case 2:n=t.sent,a({type:"profile/SET_USER_PROFILE",profile:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:var a={id:e.posts.length+1,message:t.newPostText,likesCount:0};return Object(N.a)({},e,{posts:[].concat(Object(S.a)(e.posts),[a])});case"profile/SET_USER_PROFILE":return Object(N.a)({},e,{profile:t.profile});case"profile/SET_STATUS":return Object(N.a)({},e,{status:t.status});case"profile/SAVE_PHOTO_SUCCESS":return Object(N.a)({},e,{profile:Object(N.a)({},e.profile,{photos:t.photos})});default:return e}},Ge=a(99),We=a.n(Ge),He=a(76),Ve=a.n(He),qe=function(e){return r.a.createElement("div",{className:Ve.a.item},r.a.createElement("div",{className:Ve.a.wrapper},r.a.createElement("img",{src:ne.a,alt:"User"}),e.message),r.a.createElement("div",{className:Ve.a.likes},r.a.createElement("span",null,"like")," ",r.a.createElement("span",null,e.likesCount)))},Je=a(93),Ye=a(50),Ke=Object(Ye.a)(10),Xe=Object(ye.a)({form:"profileAddPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(Je.a,{name:"newPostText",component:Ie.b,placeholder:"What's new?",validate:[Ke]})),r.a.createElement("div",null,r.a.createElement("button",null,"Add post")))})),Ze=r.a.memo((function(e){var t=e.posts,a=e.addPost,n=t.map((function(e){return r.a.createElement(qe,{id:e.id,key:e.id,message:e.message,likesCount:e.likesCount})}));return r.a.createElement("div",{className:We.a.postsBlock},r.a.createElement("h3",null,"My posts"),r.a.createElement("div",null,r.a.createElement(Xe,{onSubmit:function(e){a(e.newPostText)}})),r.a.createElement("div",{className:We.a.posts},n))})),Qe=Object(_.b)((function(e){return{posts:e.profilePage.posts}}),{addPost:function(e){return{type:De,newPostText:e}}})(Ze),$e=function(e){var t=e.profile,a=e.status,n=e.updateStatus,o=e.isOwner,s=e.savePhoto,c=e.saveProfile;return r.a.createElement("section",null,r.a.createElement(Le,{profile:t,status:a,updateStatus:n,isOwner:o,savePhoto:s,saveProfile:c}),r.a.createElement(Qe,null))},et=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId||this.props.authorizedUserId;this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement($e,Object.assign({},this.props,{isOwner:!this.props.match.params.userId}))}}]),t}(r.a.Component),tt=Object(de.d)(Object(_.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:Me,getStatus:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:n=t.sent,a(Re(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e);case 3:0===t.sent.resultCode&&a(Re(e)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.next=11,A(e);case 11:0===t.sent.resultCode&&a(Re(e));case 13:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(e);case 2:0===(n=t.sent).resultCode&&a({type:"profile/SAVE_PHOTO_SUCCESS",photos:n.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(P.a)(w.a.mark((function t(a,n){var r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,F(e);case 3:if(0!==(o=t.sent).resultCode){t.next=8;break}a(Me(r)),t.next=10;break;case 8:return a(Object(Fe.a)("edit-profile-data",{contacts:Object(K.a)({},o.messages[0].slice(30,-1).toLowerCase(),o.messages[0])})),t.abrupt("return",Promise.reject(o.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),b.g,fe.a)(et),at=a(60),nt=a.n(at),rt=function(e){var t=e.isAuth,a=e.login,n=e.logout;return r.a.createElement("header",{className:nt.a.header},r.a.createElement(d.b,{to:"/profile"},r.a.createElement("img",{className:nt.a.logo,src:"https://www.doodle.tj/wp-content/uploads/2019/06/xreact2.png.pagespeed.ic.cFqX4FyKm1.png",alt:"Logo"})),r.a.createElement("div",{className:nt.a.loginBlock},t?r.a.createElement("div",null,r.a.createElement("div",{className:nt.a.login},a),r.a.createElement("button",{onClick:n},"Log out")):r.a.createElement(d.b,{to:"/login"},"Login")))},ot={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},st=function(e,t,a,n){return{type:"auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}},ct=function(e){return{type:"auth/GET_CAPTCHA_URL_SUCCESS",captchaUrl:e}},it=function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){var a,n,r,o,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:0===(a=e.sent).resultCode&&(n=a.data,r=n.id,o=n.email,s=n.login,t(st(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},lt=function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:a=e.sent,n=a.url,t(ct(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(N.a)({},e,{},t.payload);case"auth/GET_CAPTCHA_URL_SUCCESS":return Object(N.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},mt=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(rt,this.props)}}]),t}(r.a.Component),pt=Object(_.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(P.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:0===e.sent.resultCode&&t(st(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(mt),ft=a(53),dt=a.n(ft),gt=Object(ye.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return r.a.createElement("form",{onSubmit:t,className:dt.a.loginForm},Object(Ie.c)("Email","email",[Ye.b],Ie.a,{type:"text"}),Object(Ie.c)("Password","password",[Ye.b],Ie.a,{type:"password"}),Object(Ie.c)(null,"rememberMe",[],Ie.a,{type:"checkbox"},"Remember me"),n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&Object(Ie.c)("Symbols from image","captcha",[Ye.b],Ie.a,{type:"text"}),a&&!n&&r.a.createElement("div",{className:Ue.a.formSummaryError},a),r.a.createElement("div",{className:dt.a.loginFormButton},r.a.createElement("button",null,"Login")))})),ht=Object(_.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,a,n){return function(){var r=Object(P.a)(w.a.mark((function r(o){var s,c;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I(e,t,a,n);case 2:0===(s=r.sent).resultCode?o(it()):(10===s.resultCode&&o(lt()),c=s.messages.length>0?s.messages[0]:"Some error",o(Object(Fe.a)("login",{_error:c})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,a=e.login,n=e.captchaUrl;return t?r.a.createElement(b.a,{to:"/profile"}):r.a.createElement("div",{className:dt.a.loginContainer},r.a.createElement("div",{className:dt.a.login},r.a.createElement("h1",{className:dt.a.loginTitle},"Login"),r.a.createElement(gt,{onSubmit:function(e){a(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:n})))})),Et={initialized:!1},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIALIZED_SUCCESS":return Object(N.a)({},e,{initialized:!0});default:return e}},bt=a(131),_t=a(142),Ot=a(133),wt=Object(de.c)({profilePage:ze,dialogsPage:bt.a,usersPage:q,auth:ut,form:Ot.a,app:vt}),Pt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.d,St=Object(de.e)(wt,Pt(Object(de.a)(_t.a))),Nt=function(e){return function(t){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(pe,null)},r.a.createElement(e,t))}},jt=r.a.lazy((function(){return a.e(3).then(a.bind(null,300))})),Ct=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).catchAllUnhandledErrors=function(e){alert(e)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"app-wrapper-header"},r.a.createElement("div",{className:"inner"},r.a.createElement(pt,null))),r.a.createElement("div",{className:"app-wrapper-main"},r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"app-wrapper-navbar"},r.a.createElement(g,null)),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(b.d,null,r.a.createElement(b.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(b.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(tt,null)}}),r.a.createElement(b.b,{path:"/dialogs",render:Nt(jt)}),r.a.createElement(b.b,{path:"/users",render:function(){return r.a.createElement(we,null)}}),r.a.createElement(b.b,{path:"/news",component:h}),r.a.createElement(b.b,{path:"/music",component:E}),r.a.createElement(b.b,{path:"/settings",component:v}),r.a.createElement(b.b,{path:"/login",render:function(){return r.a.createElement(ht,null)}}),r.a.createElement(b.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement("div",{className:"appPreloader"},r.a.createElement(pe,null))}}]),t}(r.a.Component),yt=Object(de.d)(b.g,Object(_.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(it()).then((function(){e({type:"app/INITIALIZED_SUCCESS"})}))}}}))(Ct),It=function(e){return r.a.createElement(d.a,{basename:"/react-social-network"},r.a.createElement(_.a,{store:St},r.a.createElement(yt,null)))};s.a.render(r.a.createElement(It,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},37:function(e,t,a){e.exports={formControl:"FormsControls_formControl__3IZ5A",error:"FormsControls_error__1QSyu",errorText:"FormsControls_errorText__2AH-C",formSummaryError:"FormsControls_formSummaryError__Wift6"}},42:function(e,t,a){e.exports={user:"User_user__1Bxqa",userPhoto:"User_userPhoto__3mwGu",userFollowButton:"User_userFollowButton__1_UP8",userInfo:"User_userInfo__1SfqK",userInfoName:"User_userInfoName__1lqcm"}},46:function(e,t,a){e.exports=a.p+"static/media/user.93a57c9f.png"},50:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},52:function(e,t,a){e.exports={paginator:"Paginator_paginator__3C8hn",paginatorPrevButton:"Paginator_paginatorPrevButton__2F6vb",paginatorNextButton:"Paginator_paginatorNextButton__Znx-P",paginatorPageNumber:"Paginator_paginatorPageNumber__jEt3x",paginatorSelectedPage:"Paginator_paginatorSelectedPage__3eUtV"}},53:function(e,t,a){e.exports={loginContainer:"Login_loginContainer__3Scu4",loginTitle:"Login_loginTitle__2PX3a",loginForm:"Login_loginForm__32H5B",loginFormButton:"Login_loginFormButton__3V3mP"}},60:function(e,t,a){e.exports={header:"Header_header__1v0yI",logo:"Header_logo__3T0lc",loginBlock:"Header_loginBlock__3g_eP",login:"Header_login__2sv5i"}},70:function(e,t,a){"use strict";var n=a(25),r=a(26),o=a(28),s=a(27),c=a(29),i=a(0),l=a.n(i),u=a(32),m=a(12),p=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){var t=function(t){function a(){return Object(n.a)(this,a),Object(o.a)(this,Object(s.a)(a).apply(this,arguments))}return Object(c.a)(a,t),Object(r.a)(a,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(u.a,{to:"/login"})}}]),a}(l.a.Component);return Object(m.b)(p)(t)}},76:function(e,t,a){e.exports={item:"Post_item__2yzXq",wrapper:"Post_wrapper__1Cl7f"}},96:function(e,t,a){e.exports={usersContainer:"Users_usersContainer__3zKO4",usersWrapper:"Users_usersWrapper__343ba"}},99:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__1cAL4",posts:"MyPosts_posts__1P0sL"}}},[[168,1,2]]]);
//# sourceMappingURL=main.f33488b2.chunk.js.map