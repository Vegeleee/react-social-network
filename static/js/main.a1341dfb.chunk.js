(this["webpackJsonpreact-social-network"]=this["webpackJsonpreact-social-network"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return f}));var n=a(60),r=a(0),o=a.n(r),s=a(37),c=a.n(s),i=a(94),u=function(e){var t=e.meta,a=e.children,n=t.error&&t.touched;return o.a.createElement("div",{className:"".concat(c.a.formControl," ").concat(n?c.a.error:"")},o.a.createElement("div",null,a),n&&o.a.createElement("div",{className:c.a.errorText},t.error))},l=function(e){var t=e.input,a=Object(n.a)(e,["input"]);return o.a.createElement(u,a,o.a.createElement("textarea",Object.assign({},t,a)))},m=function(e){var t=e.input,a=Object(n.a)(e,["input"]);return o.a.createElement(u,a,o.a.createElement("input",Object.assign({},t,a)))};function f(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return o.a.createElement("div",null,o.a.createElement(i.a,Object.assign({placeholder:e,name:t,component:n,validate:a},r))," ",s)}},100:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__1cAL4",posts:"MyPosts_posts__1P0sL"}},11:function(e,t,a){e.exports={preloadWrapper:"ProfileInfo_preloadWrapper__O7As_",descBlock:"ProfileInfo_descBlock__2HhTR",descBlockLeftCol:"ProfileInfo_descBlockLeftCol__2beiZ",mainPhoto:"ProfileInfo_mainPhoto__E2WaB",descBlockRightCol:"ProfileInfo_descBlockRightCol__2CWh2",head:"ProfileInfo_head__2L527",name:"ProfileInfo_name__BDBmC",profileDataItem:"ProfileInfo_profileDataItem__2f1zQ",profileData:"ProfileInfo_profileData__12mUh",contact:"ProfileInfo_contact__te2Ea"}},131:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(51),r=a(9),o={dialogs:[{id:1,name:"Danil"},{id:2,name:"Slava"},{id:3,name:"Maria"},{id:4,name:"Sasha"},{id:5,name:"Aleksey"},{id:6,name:"Vlad"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"Yo!"},{id:4,message:"Yo!"},{id:5,message:"Yo!"}]},s={sendMessage:function(e){return{type:"dialogs/SEND-MESSAGE",newMessage:e}}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/SEND-MESSAGE":var a={id:e.messages.length+1,message:t.newMessage};return Object(r.a)({},e,{messages:[].concat(Object(n.a)(e.messages),[a])});default:return e}}},138:function(e,t,a){e.exports=a.p+"static/media/preloader.213e51e2.gif"},139:function(e,t,a){e.exports={preloader:"Preloader_preloader__CNKtc"}},140:function(e,t,a){e.exports={status:"ProfileStatus_status__Y_Mn_"}},16:function(e,t,a){e.exports={nav:"Navbar_nav__3cHYR",navList:"Navbar_navList__2hxWr",navListItem:"Navbar_navListItem__2E7VC",active:"Navbar_active__21R_N"}},168:function(e,t,a){e.exports=a(295)},173:function(e,t,a){},174:function(e,t,a){},295:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(70),s=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(173);var c,i,u=a(30),l=a(31),m=a(34),f=a(32),p=a(35),d=(a(174),a(16)),g=a.n(d),h=a(13),E=function(){return r.a.createElement("nav",{className:g.a.nav},r.a.createElement("ul",{className:g.a.navList},r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/profile",activeClassName:g.a.active},"Profile")),r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/dialogs",activeClassName:g.a.active},"Messages")),r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/users",activeClassName:g.a.active},"Users")),r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/news",activeClassName:g.a.active},"News")),r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/music",activeClassName:g.a.active},"Music")),r.a.createElement("li",{className:g.a.navListItem},r.a.createElement(h.b,{to:"/settings",activeClassName:g.a.active},"Settings"))))},v=function(e){return r.a.createElement("div",null,"News")},b=function(e){return r.a.createElement("div",null,"Music")},_=function(e){return r.a.createElement("div",null,"Settings")},O=a(27),w=a(12),S=a(6),P=a.n(S),N=a(15),j=a(51),C=a(9),y=a(136),I=a.n(y).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"84eace83-6993-4047-89dd-082bc11cda1c"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(c||(c={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(i||(i={}));var k={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return I.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return I.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return I.delete("follow/".concat(e)).then((function(e){return e.data}))}},U=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(C.a)({},e,{},n):e}))},x={users:[],pageSize:12,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},T=function(e){return{type:"users/FOLLOW",userId:e}},A=function(e){return{type:"users/UNFOLLOW",userId:e}},L=function(e){return{type:"users/SET_USERS",users:e}},F=function(e){return{type:"users/SET_CURRENT_PAGE",currentPage:e}},D=function(e){return{type:"users/SET_TOTAL_USERS_COUNT",totalUsersCount:e}},B=function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},R=function(e,t){return{type:"users/TOGGLE_FOLLOWING_PROGRESS",isFetching:e,userId:t}},M=function(){var e=Object(N.a)(P.a.mark((function e(t,a,n,r){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(R(!0,a)),e.next=3,n(a);case 3:e.sent.resultCode===c.Success&&t(r(a)),t(R(!1,a));case 6:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW":return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!0})});case"users/UNFOLLOW":return Object(C.a)({},e,{users:U(e.users,t.userId,"id",{followed:!1})});case"users/SET_USERS":return Object(C.a)({},e,{users:t.users});case"users/SET_CURRENT_PAGE":return Object(C.a)({},e,{currentPage:t.currentPage});case"users/SET_TOTAL_USERS_COUNT":return Object(C.a)({},e,{totalUsersCount:t.totalUsersCount});case"users/TOGGLE_IS_FETCHING":return Object(C.a)({},e,{isFetching:t.isFetching});case"users/TOGGLE_FOLLOWING_PROGRESS":return Object(C.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(j.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},G=a(97),W=a.n(G),H=a(45),q=a(41),V=a(52),J=a.n(V),Y=a(137),K=a.n(Y),X=function(e){for(var t=e.totalItemsCount,a=e.pageSize,o=e.currentPage,s=e.onPageChanged,c=e.portionSize,i=void 0===c?10:c,u=Math.ceil(t/a),l=[],m=1;m<=u;m++)l.push(m);var f=Math.ceil(u/i),p=Object(n.useState)(1),d=Object(q.a)(p,2),g=d[0],h=d[1],E=(g-1)*i+1,v=g*i;return r.a.createElement("div",{className:J.a.paginator},g>1&&r.a.createElement("button",{onClick:function(){h(g-1)},className:J.a.paginatorPrevButton},"Prev"),l.filter((function(e){return e>=E&&e<=v})).map((function(e){return r.a.createElement("span",{key:e,className:K()(J.a.paginatorPageNumber,Object(H.a)({},J.a.paginatorSelectedPage,o===e)),onClick:function(){s(e)}},e)})),f>g&&r.a.createElement("button",{onClick:function(){h(g+1)},className:J.a.paginatorNextButton},"Next"))},Z=a(46),Q=a.n(Z),$=a(42),ee=a.n($),te=function(e){var t=e.user,a=e.follow,n=e.unfollow,o=e.followingInProgress;return r.a.createElement("div",{className:ee.a.user},r.a.createElement("div",null,r.a.createElement("div",{className:ee.a.userPhoto},r.a.createElement(h.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:t.photos.small?t.photos.small:Q.a,alt:"User"}))),r.a.createElement("div",{className:ee.a.userFollowButton},t.followed?r.a.createElement("button",{disabled:o.some((function(e){return e===t.id})),onClick:function(){n(t.id)}},"Unfollow"):r.a.createElement("button",{disabled:o.some((function(e){return e===t.id})),onClick:function(){a(t.id)}},"Follow"))),r.a.createElement("div",{className:ee.a.userInfo},r.a.createElement("div",{className:ee.a.userInfoName},t.name),r.a.createElement("div",null,t.status)),r.a.createElement("div",{className:ee.a.userLocation},r.a.createElement("div",null,"user.location.country"),r.a.createElement("div",null,"user.location.city")))},ae=a(138),ne=a.n(ae),re=a(139),oe=a.n(re),se=function(){return r.a.createElement("div",{className:oe.a.preloader},r.a.createElement("img",{src:ne.a,alt:"Preloader"}))},ce=function(e){var t=e.totalUsersCount,a=e.pageSize,n=e.currentPage,o=e.users,s=e.isFetching,c=e.follow,i=e.unfollow,u=e.onPageChanged,l=e.followingInProgress;return r.a.createElement("div",{className:W.a.usersContainer},r.a.createElement(X,{totalItemsCount:t,pageSize:a,currentPage:n,onPageChanged:u}),s?r.a.createElement(se,null):r.a.createElement("div",{className:W.a.usersWrapper},o.map((function(e){return r.a.createElement(te,{key:e.id,user:e,follow:c,unfollow:i,followingInProgress:l})}))))},ie=a(71),ue=a(7),le=function(e){return e.usersPage.users},me=function(e){return e.usersPage.pageSize},fe=function(e){return e.usersPage.totalUsersCount},pe=function(e){return e.usersPage.currentPage},de=function(e){return e.usersPage.isFetching},ge=function(e){return e.usersPage.followingInProgress},he=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).onPageChanged=function(e){var t=a.props;(0,t.requestUsers)(e,t.pageSize)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.requestUsers)(e.currentPage,e.pageSize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,users:this.props.users,isFetching:this.props.isFetching,follow:this.props.follow,unfollow:this.props.unfollow,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress}))}}]),t}(r.a.Component),Ee=Object(ue.d)(Object(w.b)((function(e){return{users:le(e),pageSize:me(e),totalUsersCount:fe(e),currentPage:pe(e),isFetching:de(e),followingInProgress:ge(e)}}),{follow:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M(a,e,k.follow.bind(k),T);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M(a,e,k.unfollow.bind(k),A);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},requestUsers:function(e,t){return function(){var a=Object(N.a)(P.a.mark((function a(n){var r;return P.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(B(!0)),n(F(e)),a.next=4,k.getUsers(e,t);case 4:r=a.sent,n(B(!1)),n(L(r.items)),n(D(r.totalCount));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}),ie.a)(he),ve=a(11),be=a.n(ve),_e=a(140),Oe=a.n(_e),we=function(e){var t=Object(n.useState)(!1),a=Object(q.a)(t,2),o=a[0],s=a[1],c=Object(n.useState)(e.status),i=Object(q.a)(c,2),u=i[0],l=i[1];Object(n.useEffect)((function(){l(e.status)}),[e.status]);return r.a.createElement("div",null,!o&&r.a.createElement("div",null,r.a.createElement("span",{className:Oe.a.status,onDoubleClick:function(){e.isOwner&&s(!0)}},e.status||"------")),o&&r.a.createElement("div",null,r.a.createElement("input",{autoFocus:!0,onBlur:function(){s(!1),e.updateStatus(u)},onChange:function(e){l(e.target.value)},value:u})))},Se=a(132),Pe=a(10),Ne=a(37),je=a.n(Ne),Ce=Object(Se.a)({form:"edit-profile-data"})((function(e){var t=e.profile,a=e.handleSubmit,n=e.error;return r.a.createElement("form",{onSubmit:a,className:be.a.profileData},n&&r.a.createElement("div",{className:je.a.formSummaryError},n),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"Full name: ")," ",Object(Pe.c)("Full name","fullName",[],Pe.a,{type:"text"})),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"Looking for a job: ")," ",Object(Pe.c)("","lookingForAJob",[],Pe.a,{type:"checkbox"})),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"My skills: ")," ",Object(Pe.c)("Description","lookingForAJobDescription",[],Pe.b)),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"About me: ")," ",Object(Pe.c)("About me","aboutMe",[],Pe.b)),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"Contacts: "),Object.keys(t.contacts).map((function(e){return r.a.createElement("div",{key:e,className:be.a.contact},r.a.createElement("b",null,e,": ")," ",Object(Pe.c)(e,"contacts."+e,[],Pe.a,{type:"text"}))}))),r.a.createElement("div",null,r.a.createElement("button",null,"Save")))})),ye=function(e){var t=e.profile,a=e.isOwner,n=e.toEditMode;return r.a.createElement("div",{className:be.a.profileData},r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"Looking for a job: "),t.lookingForAJob?"Yes":"No"),t.lookingForAJob&&r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"My skills: "),t.lookingForAJobDescription),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("div",null,r.a.createElement("b",null,"About me: "),t.aboutMe)),r.a.createElement("div",{className:be.a.profileDataItem},r.a.createElement("b",null,"Contacts: "),Object.keys(t.contacts).map((function(e){return r.a.createElement(Ie,{key:e,contactTitle:e,contactValue:t.contacts[e]})}))),a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Edit")))},Ie=function(e){var t=e.contactTitle,a=e.contactValue;return r.a.createElement("div",{className:be.a.contact},r.a.createElement("b",null,t,": ")," ",a)},ke=function(e){var t=e.profile,a=e.status,o=e.updateStatus,s=e.isOwner,c=e.savePhoto,i=e.saveProfile,u=Object(n.useState)(!1),l=Object(q.a)(u,2),m=l[0],f=l[1];if(!t)return r.a.createElement("div",{className:be.a.preloadWrapper},r.a.createElement(se,null));return r.a.createElement("div",null,r.a.createElement("div",{className:be.a.descBlock},r.a.createElement("div",{className:be.a.descBlockLeftCol},r.a.createElement("img",{src:t.photos.large||Q.a,className:be.a.mainPhoto,alt:"User"}),s&&r.a.createElement("input",{type:"file",onChange:function(e){var t;(null===(t=e.target.files)||void 0===t?void 0:t.length)&&c(e.target.files[0])}})),r.a.createElement("div",{className:be.a.descBlockRightCol},r.a.createElement("div",{className:be.a.head},r.a.createElement("h1",{className:be.a.name},t.fullName),r.a.createElement(we,{status:a,updateStatus:o,isOwner:s})),m?r.a.createElement(Ce,{profile:t,initialValues:t,onSubmit:function(e){i(e).then((function(){f(!1)}))}}):r.a.createElement(ye,{profile:t,isOwner:s,toEditMode:function(){f(!0)}}))))},Ue=function(e){return I.get("profile/".concat(e)).then((function(e){return e.data}))},xe=function(e){return I.get("profile/status/".concat(e)).then((function(e){return e.data}))},Te=function(e){return I.put("profile/status/",{status:e}).then((function(e){return e.data}))},Ae=function(e){var t=new FormData;return t.append("image",e),I.put("profile/photo/",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},Le=function(e){return I.put("profile",e).then((function(e){return e.data}))},Fe=a(26),De={posts:[{id:1,message:"Hi",likesCount:12},{id:2,message:"How are you",likesCount:11}],profile:null,status:"",newPostText:""},Be={setUserProfile:function(e){return{type:"profile/SET_USER_PROFILE",profile:e}},setStatus:function(e){return{type:"profile/SET_STATUS",status:e}},savePhotoSuccess:function(e){return{type:"profile/SAVE_PHOTO_SUCCESS",photos:e}},addPost:function(e){return{type:"profile/ADD_POST",newPostText:e}}},Re=function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ue(e);case 2:n=t.sent,a(Be.setUserProfile(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":var a={id:e.posts.length+1,message:t.newPostText,likesCount:0};return Object(C.a)({},e,{posts:[].concat(Object(j.a)(e.posts),[a])});case"profile/SET_USER_PROFILE":return Object(C.a)({},e,{profile:t.profile});case"profile/SET_STATUS":return Object(C.a)({},e,{status:t.status});case"profile/SAVE_PHOTO_SUCCESS":return Object(C.a)({},e,{profile:Object(C.a)({},e.profile,{photos:t.photos})});default:return e}},ze=a(100),Ge=a.n(ze),We=a(77),He=a.n(We),qe=function(e){var t=e.message,a=e.likesCount;return r.a.createElement("div",{className:He.a.item},r.a.createElement("div",{className:He.a.wrapper},r.a.createElement("img",{src:Q.a,alt:"User"}),t),r.a.createElement("div",{className:He.a.likes},r.a.createElement("span",null,"like")," ",r.a.createElement("span",null,a)))},Ve=a(50),Je=Object(Ve.a)(10),Ye=Object(Se.a)({form:"profileAddPostForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,Object(Pe.c)("What's new?","newPostText",[Je],Pe.b,{})),r.a.createElement("div",null,r.a.createElement("button",null,"Add post")))})),Ke=r.a.memo((function(e){var t=e.posts,a=e.addPost,n=t.map((function(e){return r.a.createElement(qe,{id:e.id,key:e.id,message:e.message,likesCount:e.likesCount})}));return r.a.createElement("div",{className:Ge.a.postsBlock},r.a.createElement("h3",null,"My posts"),r.a.createElement("div",null,r.a.createElement(Ye,{onSubmit:function(e){a(e.newPostText)}})),r.a.createElement("div",{className:Ge.a.posts},n))})),Xe=Object(w.b)((function(e){return{posts:e.profilePage.posts}}),Object(C.a)({},Be))(Ke),Ze=function(e){var t=e.profile,a=e.status,n=e.updateStatus,o=e.isOwner,s=e.savePhoto,c=e.saveProfile;return r.a.createElement("section",null,r.a.createElement(ke,{profile:t,status:a,updateStatus:n,isOwner:o,savePhoto:s,saveProfile:c}),r.a.createElement(Xe,null))},Qe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"refreshProfile",value:function(){var e=+this.props.match.params.userId||this.props.authorizedUserId;this.props.getProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return r.a.createElement(Ze,Object.assign({},this.props,{isOwner:!this.props.match.params.userId}))}}]),t}(r.a.Component),$e=Object(ue.d)(Object(w.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getProfile:Re,getStatus:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:n=t.sent,a(Be.setStatus(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Te(e);case 3:t.sent.resultCode===c.Success&&a(Be.setStatus(e)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},savePhoto:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ae(e);case 2:(n=t.sent).resultCode===c.Success&&a(Be.savePhotoSuccess(n.data.photos));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(N.a)(P.a.mark((function t(a,n){var r,o;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.userId,t.next=3,Le(e);case 3:if((o=t.sent).resultCode!==c.Success){t.next=8;break}r&&a(Re(r)),t.next=10;break;case 8:return a(Object(Fe.a)("edit-profile-data",{contacts:Object(H.a)({},o.messages[0].slice(30,-1).toLowerCase(),o.messages[0])})),t.abrupt("return",Promise.reject(o.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}),O.g,ie.a)(Qe),et=a(61),tt=a.n(et),at=function(e){var t=e.isAuth,a=e.login,n=e.logout;return r.a.createElement("header",{className:tt.a.header},r.a.createElement(h.b,{to:"/profile"},r.a.createElement("img",{className:tt.a.logo,src:"https://www.doodle.tj/wp-content/uploads/2019/06/xreact2.png.pagespeed.ic.cFqX4FyKm1.png",alt:"Logo"})),r.a.createElement("div",{className:tt.a.loginBlock},t?r.a.createElement("div",null,r.a.createElement("div",{className:tt.a.login},a),r.a.createElement("button",{onClick:n},"Log out")):r.a.createElement(h.b,{to:"/login"},"Login")))},nt=function(){return I.get("security/get-captcha-url").then((function(e){return e.data}))},rt=function(){return I.get("auth/me").then((function(e){return e.data}))},ot=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},st=function(){return I.delete("auth/login").then((function(e){return e.data}))},ct={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null},it=function(e,t,a,n){return{type:"auth/SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}},ut=function(e){return{type:"auth/GET_CAPTCHA_URL_SUCCESS",captchaUrl:e}},lt=function(){return function(){var e=Object(N.a)(P.a.mark((function e(t){var a,n,r,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:(a=e.sent).resultCode===c.Success&&(n=a.data,r=n.id,o=n.email,s=n.login,t(it(r,o,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},mt=function(){return function(){var e=Object(N.a)(P.a.mark((function e(t){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt();case 2:a=e.sent,n=a.url,t(ut(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_USER_DATA":return Object(C.a)({},e,{},t.payload);case"auth/GET_CAPTCHA_URL_SUCCESS":return Object(C.a)({},e,{captchaUrl:t.captchaUrl});default:return e}},pt=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(at,this.props)}}]),t}(r.a.Component),dt=Object(w.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(N.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,st();case 2:e.sent.resultCode===c.Success&&t(it(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(pt),gt=a(53),ht=a.n(gt),Et=Object(Se.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captchaUrl;return r.a.createElement("form",{onSubmit:t,className:ht.a.loginForm},Object(Pe.c)("Email","email",[Ve.b],Pe.a,{type:"text"}),Object(Pe.c)("Password","password",[Ve.b],Pe.a,{type:"password"}),Object(Pe.c)(void 0,"rememberMe",[],Pe.a,{type:"checkbox"},"Remember me"),n&&r.a.createElement("img",{src:n,alt:"captcha"}),n&&Object(Pe.c)("Symbols from image","captcha",[Ve.b],Pe.a,{type:"text"}),a&&!n&&r.a.createElement("div",{className:je.a.formSummaryError},a),r.a.createElement("div",{className:ht.a.loginFormButton},r.a.createElement("button",null,"Login")))})),vt=Object(w.b)((function(e){return{captchaUrl:e.auth.captchaUrl,isAuth:e.auth.isAuth}}),{login:function(e,t,a,n){return function(){var r=Object(N.a)(P.a.mark((function r(o){var s,u;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ot(e,t,a,n);case 2:(s=r.sent).resultCode===c.Success?o(lt()):(s.resultCode===i.CaptchaIsRequired&&o(mt()),u=s.messages.length>0?s.messages[0]:"Some error",o(Object(Fe.a)("login",{_error:u})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,a=e.login,n=e.captchaUrl;return t?r.a.createElement(O.a,{to:"/profile"}):r.a.createElement("div",{className:ht.a.loginContainer},r.a.createElement("div",{className:ht.a.login},r.a.createElement("h1",{className:ht.a.loginTitle},"Login"),r.a.createElement(Et,{onSubmit:function(e){a(e.email,e.password,e.rememberMe,e.captcha)},captchaUrl:n})))})),bt={initialized:!1},_t=function(){return{type:"app/INITIALIZED_SUCCESS"}},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/INITIALIZED_SUCCESS":return Object(C.a)({},e,{initialized:!0});default:return e}},wt=a(131),St=a(142),Pt=a(133),Nt=Object(ue.c)({profilePage:Me,dialogsPage:wt.b,usersPage:z,auth:ft,form:Pt.a,app:Ot}),jt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,Ct=Object(ue.e)(Nt,jt(Object(ue.a)(St.a)));var yt=function(e){return function(t){return r.a.createElement(n.Suspense,{fallback:r.a.createElement(se,null)},r.a.createElement(e,t))}}(r.a.lazy((function(){return a.e(3).then(a.bind(null,300))}))),It=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).catchAllUnhandledErrors=function(e){alert(e)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement("div",{className:"app-wrapper"},r.a.createElement("div",{className:"app-wrapper-header"},r.a.createElement("div",{className:"inner"},r.a.createElement(dt,null))),r.a.createElement("div",{className:"app-wrapper-main"},r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"app-wrapper-navbar"},r.a.createElement(E,null)),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(O.d,null,r.a.createElement(O.a,{exact:!0,from:"/",to:"/profile"}),r.a.createElement(O.b,{path:"/profile/:userId?",render:function(){return r.a.createElement($e,null)}}),r.a.createElement(O.b,{path:"/dialogs",render:function(){return r.a.createElement(yt,null)}}),r.a.createElement(O.b,{path:"/users",render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(O.b,{path:"/news",component:v}),r.a.createElement(O.b,{path:"/music",component:b}),r.a.createElement(O.b,{path:"/settings",component:_}),r.a.createElement(O.b,{path:"/login",render:function(){return r.a.createElement(vt,null)}}),r.a.createElement(O.b,{path:"*",render:function(){return r.a.createElement("div",null,"404 NOT FOUND")}})))))):r.a.createElement("div",{className:"appPreloader"},r.a.createElement(se,null))}}]),t}(r.a.Component),kt=Object(ue.d)(O.g,Object(w.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){e(lt()).then((function(){e(_t())}))}}}))(It),Ut=function(){return r.a.createElement(h.a,null,r.a.createElement(w.a,{store:Ct},r.a.createElement(kt,null)))};s.a.render(r.a.createElement(Ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={formControl:"FormsControls_formControl__3IZ5A",error:"FormsControls_error__1QSyu",errorText:"FormsControls_errorText__2AH-C",formSummaryError:"FormsControls_formSummaryError__Wift6"}},42:function(e,t,a){e.exports={user:"User_user__1Bxqa",userPhoto:"User_userPhoto__3mwGu",userFollowButton:"User_userFollowButton__1_UP8",userInfo:"User_userInfo__1SfqK",userInfoName:"User_userInfoName__1lqcm"}},46:function(e,t,a){e.exports=a.p+"static/media/user.93a57c9f.png"},50:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},52:function(e,t,a){e.exports={paginator:"Paginator_paginator__3C8hn",paginatorPrevButton:"Paginator_paginatorPrevButton__2F6vb",paginatorNextButton:"Paginator_paginatorNextButton__Znx-P",paginatorPageNumber:"Paginator_paginatorPageNumber__jEt3x",paginatorSelectedPage:"Paginator_paginatorSelectedPage__3eUtV"}},53:function(e,t,a){e.exports={loginContainer:"Login_loginContainer__3Scu4",loginTitle:"Login_loginTitle__2PX3a",loginForm:"Login_loginForm__32H5B",loginFormButton:"Login_loginFormButton__3V3mP"}},61:function(e,t,a){e.exports={header:"Header_header__1v0yI",logo:"Header_logo__3T0lc",loginBlock:"Header_loginBlock__3g_eP",login:"Header_login__2sv5i"}},71:function(e,t,a){"use strict";var n=a(60),r=a(0),o=a.n(r),s=a(27),c=a(12),i=function(e){return{isAuth:e.auth.isAuth}};t.a=function(e){return Object(c.b)(i)((function(t){var a=t.isAuth,r=Object(n.a)(t,["isAuth"]);return a?o.a.createElement(e,r):o.a.createElement(s.a,{to:"/login"})}))}},77:function(e,t,a){e.exports={item:"Post_item__2yzXq",wrapper:"Post_wrapper__1Cl7f"}},97:function(e,t,a){e.exports={usersContainer:"Users_usersContainer__3zKO4",usersWrapper:"Users_usersWrapper__343ba"}}},[[168,1,2]]]);
//# sourceMappingURL=main.a1341dfb.chunk.js.map